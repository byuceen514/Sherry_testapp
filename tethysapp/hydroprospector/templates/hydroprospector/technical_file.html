<h1 style="text-align: center;">HydroProspector Technical Documentation</h1>
<h2>Application Details</h2>
<p>HydroProspector is a Tethys Web Application which provides a user interface to facilitate users to design dam within
    Yichang, China and the surrounding region. This app allows users to 1) choose one location for a dam, 2)
    design dam height, 3) delineate watershed of the dam point, 4) show the reservoir generated by the dam, 5) and calculate
    volume of the reservoir.</p>
<p>Most functionalities of HydroProspector are from two ArcGIS services which were developed using ArcGIS.</p>

<h2>System Requirements</h2>
<p><strong>Hardware:</strong></p>
<ul>
<li>A PC with the Windows operating system (Windows 7 or higher)</li>
<li>Processor: 4 CPU Cores</li>
<li>RAM: 4 GHz</li>
<li>10 GB of available hard disk space</li>
<li>5400 RPM hard drive</li>
</ul>
<p><strong>Software:</strong></p>
<ul>
<li>ArcMap (Download website: <a href="http://www.esri.com/software/arcgis/arcgis-">http://www.esri.com/software/arcgis/arcgis-for-desktop</a><span style="text-decoration: underline;"></span>)</li>
<li>ArcGIS Server</li>
<li>VirtualBox (Download website: <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a><span style="text-decoration: underline;">)</span></li>
<li>Tethys Platform installed (Installation description: <a href="http://docs.tethysplatform.org/en/latest/installation.html">http://docs.tethysplatform.org/en/latest/installation.html</a>)</li>
</ul>

<h2>Conceptual Diagram</h2>
<p>The main conceptual diagram of HydroProspector is shown as Figure 1 below.This app uses a map service and a goeprocessing service.
    The map service shows the DEM file and mian rivers in YiChang area. The geoprocessing service
     is used to show the reservior and calculate its volume when user select one location and give the dam height.  This app currently is only functional in the region covered by the map service. The app will not function properly if a point outside of the map service area is selected.
After reading in user-clicked point and user-inputed dam height, the app will automatically run the geoprocessing service, get the watershed polygon, reservoir polygon and reservoir
volume, and display them.
<p style="text-align: center;"><img src="/static/hydroprospector/images/conceptual.gif" style="width:450px;height:475px;"></p>
<p style="text-align: center;"><em><strong>Figure 1: Conceptual Diagram of HydroProspector Application</strong></em></p>

<h2>ArcGIS Services</h2>
<p><strong>Map Service</strong></p>
The map service URL is
<a href="http://geoserver.byu.edu/arcgis/rest/services/SherryJake/HydroProspectorDEMfile/MapServer">http://geoserver.byu.edu/arcgis/rest/services/SherryJake/HydroProspectorDEMfile/MapServer</a>.
This map service includes a 30 meters DEM file and main rivers in YiChang, China and surounding region. The rivers actually are the flow accumulation
result from the DEM file.

<p><strong>Geoprocessing Service</strong></p>
The geoprocessing service URL is
<a href="http://geoserver.byu.edu/arcgis/rest/services/SherryJake/HPVolumeScript/GPServer">http://geoserver.byu.edu/arcgis/rest/services/SherryJake/HPVolumeScript/GPServer</a>.
 This geoprocessing service was developed with ModelBuilder in ArcMap. We built the model (Figure 2) and exported to a Python script, and modified it to
work well with user-input data.

<p style="text-align: center;"><img src="/static/hydroprospector/images/GPmodel.gif"></p>
<p style="text-align: center;"><em><strong>Figure 2: ArcMap model for Geoprocessing Service</strong></em></p>

<h2>Key Functions</h2>

<p style="text-align: center;"><em><strong>Table 1: Functions in HydroProspector with explanation</strong></em></p>

<table style="height: 157px; margin-left: auto; margin-right: auto;" border="1" width="688">
<tbody>
<tr>
<td><strong>Function Name</strong></td>
<td style="text-align: left;"><strong>Comments</strong></td>
</tr>
<tr>
<td>addDamPoint()</td>
<td style="text-align: left;">Add user-clicked point to the map</td>
</tr>
<tr>
<td>run_service()</td>
<td style="text-align: left;">Run geoprocessing service</td>
</tr>
<tr>
<td>statusCallback()</td>
<td style="text-align: left;">Check geoprocessing status, receive JobInfo object containing the job ID, the job status, and any GPmessages&nbsp;returned by the geoprocessor.</td>
</tr>
<tr>
<td>completeCallback()</td>
<td style="text-align: left;">Fetch results when geoprocessing completed</td>
</tr>
<tr>
<td>displayWatershed()</td>
<td style="text-align: left;">Draw watershed polygon result on the map</td>
</tr>
<tr>
<td>displayLake()</td>
<td style="text-align: left;">Draw reservoir&nbsp;polygon result on the map</td>
</tr>
<tr>
<td>displayVolume()</td>
<td style="text-align: left;">Show reservoir volume</td>
</tr>
</tbody>
</table>